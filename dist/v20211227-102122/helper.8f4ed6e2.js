import{o as D}from"./onMountedOrActivated.3ab72fe6.js";import{b as A,t as E,s as X,aQ as Y}from"./index.b82b58bf.js";import{R as w,m as y,t as x,r as g,bv as $}from"./vendor.1ce5b3a9.js";const{t:b}=A(),C=Symbol();function T(i){return X(i,C,{native:!0})}function L(){return E(C)}function j(i,e){const n=w({field:"",title:"\u65B0\u5217",editRender:{name:"input"},slots:{header:"normal-title-text",default:"normal-cell-text",edit:"normal-cell-text-editor"}}),u=["a","b","c","d","e"],{getUniqueField:s}=R(u);function o(l=e.columns.length){n.field=s(),e.columns.splice(l,0,{title:n.title,field:n.field,headerType:0});const c=e.columns.map(d=>{const p=y(x(n));return p.title=d.title,p.field=d.field,p});e.data.forEach(d=>{d[n.field]={val:"-",qData:"",type:0}}),i.value.loadColumn(c),n.field="",n.title="\u65B0\u5217"}function a(l){const c=i.value,{fullData:t}=c.getTableData(),d=e.columns[l].field;t.forEach(f=>{Reflect.deleteProperty(f,d)}),e.data.forEach(f=>{Reflect.deleteProperty(f,d)}),c.loadData(t),e.columns.splice(l,1);const p=e.columns.map(f=>{const v=y(x(n));return v.title=f.title,v.field=f.field,v});c.loadColumn(p)}return[n,{addCol:o,removeCol:a}]}function q(i,e){function n(s=e.data.length){const o={},a={};e.columns.forEach(t=>{o[t.field]="-",a[t.field]={type:0,val:"-"}}),e.data.splice(s,0,a);const l=i.value,{fullData:c}=l.getTableData();c.splice(s,0,o),l.loadData(c)}function u(s){e.data.splice(s,1);const o=i.value,{fullData:a}=o.getTableData();a.splice(s,1),o.loadData(a)}return{addSpaceRow:n,removeRow:u}}function R(i){const e=i||[],n="abcdefghijklmnopqrstuvwxyz";function u(){const s=e.length;let o="";if(s===0)o="a",e.push(o);else{const a=e[s-1],l=a.length,c=n.indexOf(a[l-1]);c>-1&&c<25?o=a.slice(0,l-1)+n.charAt(c+1):o=new Array(l+1).fill("a").join("")}return e.push(o),o}return{getUniqueField:u}}function B(i,e){const n=g([]);D(()=>{const a=i.value.$el.getElementsByTagName("tbody")[0],l=document.createElement("div");Object.assign(l.style,{position:"absolute",zIndex:999,backgroundColor:"rgba(64,158,255,0.4)",pointerEvents:"none"});const c=g(!1),t={startX:0,startY:0,endX:0,endY:0,toRight:!0,toBottom:!0};function d(r){const m=r.getBoundingClientRect(),h=l.getBoundingClientRect();return!(m.right<h.left||m.left>h.right||m.bottom<h.top||m.top>h.bottom)}function p(r){r.button!==0||r.buttons!==1||r.ctrlKey||r.shiftKey||r.target.nodeName==="INPUT"||($(n.value,m=>m),t.startX=r.clientX,t.startY=r.clientY,t.endX=r.clientX,t.endY=r.clientY,c.value=!0,l.style.left=`${t.startX}px`,l.style.top=`${t.startY}px`,Object.assign(l.style,{left:`${t.startX}px`,top:`${t.startY}px`,width:"0px",height:"0px"}),document.body.appendChild(l),a.addEventListener("mousemove",f),a.addEventListener("mouseup",v))}function f(r){t.endX=r.clientX,t.endY=r.clientY,Object.assign(l.style,{left:`${Math.min(t.startX,t.endX)}px`,top:`${Math.min(t.startY,t.endY)}px`,width:`${Math.abs(t.endX-t.startX)}px`,height:`${Math.abs(t.endY-t.startY)}px`})}function v(){a.removeEventListener("mousemove",f),a.removeEventListener("mouseup",v),c.value=!1,a.querySelectorAll("td").forEach(r=>{if(d(r)){const m=i.value.getColumnNode(r).index,h=i.value.getRowNode(r.parentNode).index;n.value.push({col:m,row:h})}}),document.body.removeChild(l),e(n.value)}a.addEventListener("mousedown",p)});function u(){return n}function s(o){$(n.value,a=>a),n.value.push(...o)}return{getAreaCells:u,setAreaCells:s}}function N(i){const e=g("");function n(s){return/^\d{4}-\d{2}-\d{2}$/i.test(s)?s:/^-?\d+$/i.test(s)?Y(Math.abs(parseInt(s)),i.timeConfig.endDate):i.timeConfig.endDate}function u(s){const o=s.target.value;/^\d{4}-\d{2}-\d{2}$/i.test(o)?e.value=b("table.headerCell.isDate"):/^-?\d+$/i.test(o)?e.value=b("table.headerCell.isOffset"):e.value=b("table.headerCell.isError")}return[e,{timeStrFilter:n,vaildTimeStr:u}]}export{q as a,N as b,T as c,B as d,L as e,R as f,j as u};

var U=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var Y=(n,d,c)=>d in n?U(n,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[d]=c,v=(n,d)=>{for(var c in d||(d={}))X.call(d,c)&&Y(n,c,d[c]);if(j)for(var c of j(d))q.call(d,c)&&Y(n,c,d[c]);return n},y=(n,d)=>G(n,H(d));import D from"./TopList.b679eeec.js";import $ from"./RankChart.caf3cce1.js";import{_ as A,g as K,a as g,b as W}from"./DetailModal.9005a50a.js";import{_ as J,b as Q,al as Z}from"./index.b82b58bf.js";import{D as E,bX as M,R as k,r as S,F as ee,G as te,K as a,v as f,a9 as m,u as e,aU as T,L as l,bx as ae,N as se,bH as oe,X as ne,m as ie}from"./vendor.1ce5b3a9.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{a as le}from"./index.fa044461.js";import"./useECharts.3cfbc595.js";import"./useTimeout.9c582638.js";import"http://at.alicdn.com/t/font_2948274_sdqssf53jp.js";import"./useWindowSizeFn.31db8a65.js";import"./index.f2f6fea5.js";var h;(function(n){n[n.Buy=1]="Buy",n[n.Sale=-1]="Sale",n[n.Done=0]="Done"})(h||(h={}));const re={class:"h-layout-full flex flex-col gap-4 p-4 w-full"},de={class:"flex items-center h-3/5 gap-4"},ce={class:"w-60 h-full bg-white shadow-md p-4 flex flex-col gap-2 overflow-y-scroll no-scroll-bar"},ue={class:"h-8 pl-2 text-primary"},fe={class:"flex justify-start gap-4 flex-grow h-full children:bg-white children:shadow-md children:h-full children:flex-grow"},pe={class:"flex text-center h-10 items-center sticky top-0 bg-white shadow-md"},me={class:"w-20"},he={class:"flex flex-grow divide-x divide-gray-200"},_e={class:"w-1/3"},ve={class:"w-1/3"},ye={class:"w-1/3"},ke={class:"flex text-center h-10 items-center sticky top-0 bg-white shadow-md"},we={class:"w-20"},xe={class:"flex flex-grow divide-x divide-gray-200"},De={class:"w-1/3"},ge={class:"w-1/3"},be={class:"w-1/3"},Re={class:"flex text-center h-10 items-center sticky top-0 bg-white shadow-md"},je={class:"w-20"},Ye={class:"flex flex-grow divide-x divide-gray-200"},$e={class:"w-1/3"},Me={class:"w-1/3"},Se={class:"w-1/3"},Te={class:"flex-grow bg-white shadow-md flex items-center justify-between p-4 w-full"},Be=E({setup(n){const d=M.Group,c=M.Button,{t:s}=Q(),p=k({done:[],buy:[],sale:[]}),u=k({tradeDate:"",contract:"",productId:""}),_=k({buy:`${s("monitor.futureRank.openBuy")}Top10`,sale:`${s("monitor.futureRank.openSale")}Top10`});async function B(){const t=ie(u);for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&t[o]===""&&Reflect.deleteProperty(t,o);p.done=await g(y(v({},t),{rankType:h.Done})),p.buy=await g(y(v({},t),{rankType:h.Buy})),p.sale=await g(y(v({},t),{rankType:h.Done}))}const r=k({type:"productId",key:"",typeList:["productId","contract"],searchResult:[]});async function C(){r.searchResult=(await W({type:r.typeList.indexOf(r.type),key:r.key})).map(t=>typeof t=="string"?{value:t,label:t,key:t}:{value:t.productName,label:t.productName,key:t.productId})}const I=ne(C,800);async function b(t,o=!1){o||(u.productId="",u.contract="",u[r.type]=r.searchResult.find(V=>V.value===t).key,await P());const i=r.key;_.buy=`${u.tradeDate} ${i} ${s("monitor.futureRank.openBuy")}Top10`,_.sale=`${u.tradeDate} ${i} ${s("monitor.futureRank.openSale")}Top10`,await B()}function N(t){const o=t.format("YYYY-MM-DD");return!w.value.includes(o)}const w=S([""]);async function P(){w.value=(await K({[r.type]:u[r.type]})).map(t=>Z(t))}const R=S();function L(){return R.value}const[z,{openModal:O,setModalProps:F}]=le();function x(t,o){F({title:`${t}-${r.key} ${u.tradeDate} ${s("monitor.futureRank.openInterestDetail")}`,width:1200,height:500,minHeight:500,footer:null}),O(!0,{memberName:t,tradeDate:u.tradeDate,productId:o})}return(t,o)=>(ee(),te("div",re,[a("div",de,[a("div",ce,[f(e(d),{size:"small",value:e(r).type,"onUpdate:value":o[0]||(o[0]=i=>e(r).type=i),"button-style":"solid"},{default:m(()=>[f(e(c),{value:"contract"},{default:m(()=>[T(l(e(s)("monitor.futureRank.contract")),1)]),_:1}),f(e(c),{value:"productId"},{default:m(()=>[T(l(e(s)("monitor.futureRank.productName")),1)]),_:1})]),_:1},8,["value"]),f(e(ae),{size:"small",value:e(r).key,"onUpdate:value":o[1]||(o[1]=i=>e(r).key=i),"show-search":"",options:e(r).searchResult,onSearch:e(I),onSelect:o[2]||(o[2]=i=>b(i,!1)),placeholder:e(s)("monitor.futureRank.serachPlaceholder")},null,8,["value","options","onSearch","placeholder"]),a("div",ue,l(e(u).tradeDate||e(s)("monitor.futureRank.timePlaceholder")),1),f(e(oe),{getCalendarContainer:L,valueFormat:"YYYY-MM-DD","disabled-date":N,size:"small","show-today":!1,value:e(u).tradeDate,"onUpdate:value":o[3]||(o[3]=i=>e(u).tradeDate=i),open:"",onChange:o[4]||(o[4]=i=>b(i,!0))},{dateRender:m(({current:i})=>[a("div",{class:se([w.value.includes(i.format("YYYY-MM-DD"))?"avalid-date":"disabled",i.format("YYYY-MM-DD")===e(u).tradeDate?"selected-date":""])},l(i.date()),3)]),default:m(()=>[a("div",{ref_key:"calendar",ref:R,class:"-mt-2"},null,512)]),_:1},8,["value"])]),a("div",fe,[f(D,{"data-list":e(p).done,onOpenDetail:x},{default:m(()=>[a("div",pe,[a("div",me,l(e(s)("monitor.futureRank.rankIndex")),1),a("div",he,[a("div",_e,l(e(s)("monitor.futureRank.memberName")),1),a("div",ve,l(e(s)("monitor.futureRank.openDone")),1),a("div",ye,l(e(s)("monitor.futureRank.change")),1)])])]),_:1},8,["data-list"]),f(D,{"data-list":e(p).buy,onOpenDetail:x},{default:m(()=>[a("div",ke,[a("div",we,l(e(s)("monitor.futureRank.rankIndex")),1),a("div",xe,[a("div",De,l(e(s)("monitor.futureRank.memberName")),1),a("div",ge,l(e(s)("monitor.futureRank.openBuy")),1),a("div",be,l(e(s)("monitor.futureRank.change")),1)])])]),_:1},8,["data-list"]),f(D,{"data-list":e(p).sale,onOpenDetail:x},{default:m(()=>[a("div",Re,[a("div",je,l(e(s)("monitor.futureRank.rankIndex")),1),a("div",Ye,[a("div",$e,l(e(s)("monitor.futureRank.memberName")),1),a("div",Me,l(e(s)("monitor.futureRank.openSale")),1),a("div",Se,l(e(s)("monitor.futureRank.change")),1)])])]),_:1},8,["data-list"])])]),a("div",Te,[f($,{class:"w-1/2","data-list":e(p).buy,title:e(_).buy,size:10},null,8,["data-list","title"]),f($,{class:"w-1/2","data-list":e(p).sale,title:e(_).sale,size:10},null,8,["data-list","title"])]),f(A,{onRegister:e(z)},null,8,["onRegister"])]))}});var Je=J(Be,[["__scopeId","data-v-04e0396e"]]);export{Je as default};

var le=Object.defineProperty,de=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var q=(e,u,h)=>u in e?le(e,u,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[u]=h,v=(e,u)=>{for(var h in u||(u={}))ie.call(u,h)&&q(e,h,u[h]);if(P)for(var h of P(u))re.call(u,h)&&q(e,h,u[h]);return e},U=(e,u)=>de(e,ae(u));import{u as y,m as z,D as oe,R as ue,r as ye,j as w,t as M,o as G,aq as B,a0 as he,V as H,v as A,H as J,J as $,by as I,aj as Q,bz as W,bt as X}from"./vendor.1ce5b3a9.js";/* empty css              */import{am as Y,p as x,a as fe,q as Ke,ap as ke,a5 as pe}from"./index.b82b58bf.js";import{u as xe}from"./useContextMenu.cb81dada.js";function ge(e,u){function h(o){const s=[],i=o||y(e),{key:c,children:l}=y(u);if(!l||!c)return s;for(let n=0;n<i.length;n++){const t=i[n];s.push(t[c]);const r=t[l];r&&r.length&&s.push(...h(r))}return s}function g(o){const s=[],i=o||y(e),{key:c,children:l}=y(u);if(!l||!c)return s;for(let n=0;n<i.length;n++){const t=i[n];t.disabled!==!0&&t.selectable!==!1&&s.push(t[c]);const r=t[l];r&&r.length&&s.push(...g(r))}return s}function _(o,s){const i=[],c=s||y(e),{key:l,children:n}=y(u);if(!n||!l)return i;for(let t=0;t<c.length;t++){const r=c[t],K=r[n];o===r[l]?(i.push(r[l]),K&&K.length&&i.push(...h(K))):K&&K.length&&i.push(..._(o,K))}return i}function a(o,s,i){if(!o)return;const c=i||y(e),{key:l,children:n}=y(u);if(!(!n||!l))for(let t=0;t<c.length;t++){const r=c[t],K=r[n];if(r[l]===o){c[t]=v(v({},c[t]),s);break}else K&&K.length&&a(o,s,r[n])}}function F(o=1,s,i=1){if(!o)return[];const c=[],l=s||y(e)||[];for(let n=0;n<l.length;n++){const t=l[n],{key:r,children:K}=y(u),m=r?t[r]:"",E=K?t[K]:[];c.push(m),E&&E.length&&i<o&&(i+=1,c.push(...F(o,E,i)))}return c}function j({parentKey:o=null,node:s,push:i="push"}){const c=z(y(e));if(!o){c[i](s),e.value=c;return}const{key:l,children:n}=y(u);!n||!l||(Y(c,t=>{if(t[l]===o)return t[n]=t[n]||[],t[n][i](s),!0}),e.value=c)}function T({parentKey:o=null,list:s,push:i="push"}){const c=z(y(e));if(!(!s||s.length<1))if(o){const{key:l,children:n}=y(u);if(!n||!l)return;Y(c,t=>{if(t[l]===o){t[n]=t[n]||[];for(let r=0;r<s.length;r++)t[n][i](s[r]);return e.value=c,!0}})}else for(let l=0;l<s.length;l++)c[i](s[l])}function S(o,s){if(!o)return;const i=s||y(e),{key:c,children:l}=y(u);if(!(!l||!c))for(let n=0;n<i.length;n++){const t=i[n],r=t[l];if(t[c]===o){i.splice(n,1);break}else r&&r.length&&S(o,t[l])}}return{deleteNodeByKey:S,insertNodeByKey:j,insertNodesByKey:T,filterByLevel:F,updateNodeByKey:a,getAllKeys:h,getChildrenKeys:_,getEnabledKeys:g}}const be={value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:x.string,toolbar:x.bool,search:x.bool,searchValue:x.string,checkStrictly:x.bool,clickRowToExpand:x.bool.def(!0),checkable:x.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:x.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array},filterFn:{type:Function,default:null},highlight:{type:[Boolean,String],default:!1},expandOnSearch:x.bool.def(!1),checkOnSearch:x.bool.def(!1),selectedOnSearch:x.bool.def(!1)};var Ce=oe({name:"BasicTree",inheritAttrs:!1,props:be,emits:["update:expandedKeys","update:selectedKeys","update:value","change","check"],setup(e,{attrs:u,slots:h,emit:g,expose:_}){const a=ue({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),F=ye([]),[j]=xe(),{prefixCls:T}=fe("basic-tree"),S=w(()=>{const{replaceFields:d}=e;return v({children:"children",title:"title",key:"key"},d)}),o=w(()=>{let d=U(v(v({blockNode:!0},u),e),{expandedKeys:a.expandedKeys,selectedKeys:a.selectedKeys,checkedKeys:a.checkedKeys,checkStrictly:a.checkStrictly,replaceFields:y(S),"onUpdate:expandedKeys":k=>{a.expandedKeys=k,g("update:expandedKeys",k)},"onUpdate:selectedKeys":k=>{a.selectedKeys=k,g("update:selectedKeys",k)},onCheck:(k,f)=>{a.checkedKeys=k;const p=M(k);g("update:value",p),g("check",p,f)},onRightClick:E});return G(d,"treeData","class")}),s=w(()=>y(F)),i=w(()=>!s.value||s.value.length===0),{deleteNodeByKey:c,insertNodeByKey:l,insertNodesByKey:n,filterByLevel:t,updateNodeByKey:r,getAllKeys:K,getEnabledKeys:m}=ge(F,S);async function E({event:d,node:k}){var N;const{rightMenuList:f=[],beforeRightClick:p}=e;let b={event:d,items:[]};if(p&&Ke(p)){let C=await p(k,d);Array.isArray(C)?b.items=C:Object.assign(b,C)}else b.items=f;!((N=b.items)==null?void 0:N.length)||j(b)}function D(d){a.expandedKeys=d}function Z(){return a.expandedKeys}function R(d){a.selectedKeys=d}function ee(){return a.selectedKeys}function te(d){a.checkedKeys=d}function ne(){return a.checkedKeys}function se(d){a.checkedKeys=d?m():[]}function L(d){a.expandedKeys=d?K():[]}function ce(d,k){if(!(!e.clickRowToExpand&&k))if(!a.expandedKeys.includes(d))D([...a.expandedKeys,d]);else{const f=[...a.expandedKeys],p=f.findIndex(b=>b===d);p!==-1&&f.splice(p,1),D(f)}}B(()=>{F.value=e.treeData}),he(()=>{const d=parseInt(e.defaultExpandLevel);d>0?a.expandedKeys=t(d):e.defaultExpandAll&&L(!0)}),B(()=>{a.expandedKeys=e.expandedKeys}),B(()=>{a.selectedKeys=e.selectedKeys}),B(()=>{a.checkedKeys=e.checkedKeys}),H(()=>e.value,()=>{a.checkedKeys=M(e.value||[])}),H(()=>a.checkedKeys,()=>{const d=M(a.checkedKeys);g("update:value",d),g("change",d)}),B(()=>{a.checkStrictly=e.checkStrictly}),_({setExpandedKeys:D,getExpandedKeys:Z,setSelectedKeys:R,getSelectedKeys:ee,setCheckedKeys:te,getCheckedKeys:ne,insertNodeByKey:l,insertNodesByKey:n,deleteNodeByKey:c,updateNodeByKey:r,checkAll:se,expandAll:L,filterByLevel:d=>{a.expandedKeys=t(d)}});function O({data:d,level:k}){return d?d.map(f=>{const{key:p,children:b}=y(S),N=G(f,"title");N.dataRef=f;const C=X(f,b)||[];return A(I.TreeNode,Q(N,{node:M(f),key:X(f,p)}),{title:()=>{var V;return A("span",{class:`${T}-title`,onClick:ce.bind(null,f[p],f.isLeaf)},[pe(h,(V=f.slots)==null?void 0:V.title,f)])},default:()=>O({data:C,level:k+1})})}):null}return()=>A("div",{class:[T,u.class]},[J(A(I,Q(y(o),{showIcon:!1}),v({default:()=>O({data:y(s),level:1})},ke(h))),[[$,!y(i)]]),J(A("div",{class:"pt-8"},[A(W,{image:W.PRESENTED_IMAGE_SIMPLE},null)]),[[$,y(i)]])])}});export{Ce as _};

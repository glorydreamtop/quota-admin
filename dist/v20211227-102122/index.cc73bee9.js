import{b as B,_ as m,q as I,a as F,ab as C}from"./index.86e9d70c.js";import{R as h,S as z,aq as S,j as g,bL as j,a1 as k,t as A,u as d,aF as T,r as f,bn as N,D as b,aH as D,a2 as p,F as y,a3 as _,a9 as v,aU as R,L as q,aj as w,al as L,ac as O,am as P,ak as E,aI as U,v as V}from"./vendor.2e1d877b.js";function H(t,e="value",a="change",o){const s=T(),r=s==null?void 0:s.emit,n=h({value:t[e]}),u=z(n),l=i=>{n.value=i};return S(()=>{n.value=t[e]}),[g({get(){return n.value},set(i){j(i,u.value)||(n.value=i,k(()=>{r==null||r(a,i,...A(d(o))||[])}))}}),l,u]}function x(t){const e=f(t),a=f(!1);let o;function s(){o&&window.clearInterval(o)}function r(){a.value=!1,s(),o=null}function n(){d(a)||!!o||(a.value=!0,o=setInterval(()=>{d(e)===1?(r(),e.value=t):e.value-=1},1e3))}function u(){e.value=t,r()}function l(){u(),n()}return N(()=>{u()}),{start:n,reset:u,restart:l,clear:s,stop:r,currentCount:e,isStart:a}}const G={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},J=b({name:"CountButton",components:{Button:D},props:G,setup(t){const e=f(!1),{currentCount:a,isStart:o,start:s,reset:r}=x(t.count),{t:n}=B(),u=g(()=>d(o)?n("component.countdown.sendText",[d(a)]):n("component.countdown.normalText"));S(()=>{t.value===void 0&&r()});async function l(){const{beforeStartFunc:c}=t;if(c&&I(c)){e.value=!0;try{await c()&&s()}finally{e.value=!1}}else s()}return{handleStart:l,currentCount:a,loading:e,getButtonText:u,isStart:o}}});function K(t,e,a,o,s,r){const n=p("Button");return y(),_(n,w(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:v(()=>[R(q(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var $=m(J,[["render",K]]);const M={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},Q=b({name:"CountDownInput",components:{CountButton:$},inheritAttrs:!1,props:M,setup(t){const{prefixCls:e}=F("countdown-input"),[a]=H(t);return{prefixCls:e,state:a}}});function W(t,e,a,o,s,r){const n=p("CountButton"),u=p("a-input");return y(),_(u,w(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),L({addonAfter:v(()=>[V(n,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[O(Object.keys(t.$slots).filter(l=>l!=="addonAfter"),l=>({name:l,fn:v(c=>[P(t.$slots,l,E(U(c||{})))])}))]),1040,["class","size","value"])}var X=m(Q,[["render",W]]);const tt=C(X);C($);export{tt as C,H as u};
